# 操作系统

# 1.操作系统引论

## 1.1操作系统的目的和作用

### 1.1.1操作系统的目标

通常在计算机硬件配置的OS(操作系统),其目标有以下几点:

1. 方便性——便于使用
2. 有效性——效率高
3. 可扩充性——方便增加模块
4. 开放性——兼容性

### 1.1.2操作系统的作用

1. OS作为用户与计算机硬件系统之间的接口

   OS处于用户与计算机硬件系统之间，用户通过OS来使用计算机系统

## 1.2操作系统的发展过程

### 1.2.1无操作系统的计算机系统

1. 穿孔

2. 纸带

3. 卡片

4. 纸带输入机

5. 卡片输入机

   缺点：

   1. 用户独占全机
   2. CPU等待人工操作

### 1.2.2单道批处理系统

### 1.2.3多道批处理系统

### 1.2.4分时系统

1. 分时系统的产生

   推动分时系统产生和发展的主要动力，则是用户的需求：<u>**人机交互，共享主机**</u>

2. 分时系统实现中的关键问题

   **<u>最关键的问题是如何使用户能与自己的作业进行交互</u>**

   1. 及时接收
   2. 及时处理

3. 分时系统的特征

   1. **<u>多路性</u>**
   2. **<u>独立性</u>**
   3. **<u>及时性</u>**
   4. **<u>交互性</u>**

### 1.2.5实时系统

**实时系统**是指系统能及时（或即时）响应外部事件的请求，在规定的时间内完成对该事件的处理，并控制所有实时任务协调一致地运行

<u>**应用需求 1、实时控制 2、实时信息处理**</u>

**<u>硬实时任务：工业控制系统，嵌入式系统</u>**

**<u>软实时任务：信息查询系统，多媒体系统</u>**

1. 分时系统侧重于：多个用户终端的互不干扰，人机交互。
2. 实时系统侧重于：多路控制现场设备、数据互不干扰，特定程序间的数据信息交互。

## 1.3操作系统的基本特性

*并发性*：**宏观同时，微观交错**

*共享性*：**并发执行，共用资源**

*虚拟性*：**物理设备**<u>**(单个)**</u> 	**<u>复用</u>**	—>	**逻辑设备**<u>**(多个)**</u> 	**<u>时分复用	空分复用</u>**

*异步性*：**多进程交替，执行断续性**

注意：*并行与并发的区别*

**<u>并发</u>和<u>共享</u>是操作系统的两个最基本的特征，它们互为存在的条件。**

## 1.4操作系统的主要功能

操作系统是一组控制和管理计算机硬件和软件资源、合理地对各类作业进行调度，以及方便用户的程序的集合

## 1.5操作系统的结构设计

### 1.5.1传统的操作系统结构

四代变革：

1. 传统结构操作系统
   1. 无结构OS
   2. 模块式OS
   3. 层次式结构OS
2. 现代结构操作系统
   1. 客户/服务器模式
   2. 面向对象的程序设计
   3. 微内核结构OS

# 2.进程管理

## 2.1进程的基本概念

### 2.1.1前趋图

广度搜索

### 2.1.2程序并发执行时的特征：

1. 间断性
2. 失去封闭性
3. 不可再现性

### 2.1.3程序顺序执行时的特征：

1. 顺序性
2. 封闭性
3. 可再现性

## 2.2进程控制

### 2.2.1进程的定义和特征

1. **<u>进程的定义</u>**：

   1. 进程是程序的一次<u>**执行**</u>，是进程实体的**<u>运行过程</u>**
   2. 进程是可并发执行的<u>**程序**</u>在一个<u>**数据集合**</u>上的运行过程。它是系统进行资源分配和调度的一个独立单位.

   进程实体由程序段、数据段、进程控制块(<u>**PCB**</u>)构成

   注：进程与程序的主要区别

   <u>程序</u>是指令的集合，本身没有任何运行的含义，是一个静态概念；而<u>**进程**</u>是程序在处理机上的一次执行过程，是一个动态概念。

### 2.2.2进程基本状态及其转换

**进程的状态反映进程执行过程的变化**

1. **进程的三种基本状态**：

   **运行态**：**进程占有CPU，并在CPU上运行**

   **就绪态**：指进程已获得了除处理机之外的所有所需的资源，已经具备运行条件，但由于无CPU暂时不能运行的状态。（当调度给其CPU时，立即可以运行）

   **阻塞态**：**等待态、封锁态、睡眠态**。指进程因等待某种事件的发生而暂时不能运行的状态（即使CPU空闲，该进程也不可能运行）

2. 三种基本状态的转换

   进程因某事件从运行到阻塞状态

   某事件被解除从阻塞变成就绪

   时间片用完从运行到就绪

   进程调度程序把处理机分配给进程从就绪到运行

### 2.2.4进程管理中的数据结构PCB

**PCB是操作系统中最重要的数据结构，是进程存在的唯一标志；是独立运行的基本单位，是资源分配的基本单位。**

进程控制块的信息和作用：

​	<u>**进程标识信息**</u>，是进程的唯一标识

​	<u>**处理机状态**</u>，即是现场信息保存的地方，从而能实现间断性运行方式：
​	<u>**进程调度信息**</u>：提供进程调度所需要的信息；
​	<u>**进程控制信息**</u>：提供进程管理所需要的信息，所有资源的列表；实现与其他进程的同步与通信

PCB的组织方式

1. 链接方式
2. 索引方式

## 2.3进程同步

### 2.3.1操作系统内核

为了确保系统的安全性，常将处理机的执行状态分为<u>**系统态**</u>和<u>**用户态**</u>。

进程控制由操作系统内核实现，运行于系统态。

<u>**OS内核**</u>是计算机硬件的第一次扩充，由一些与硬件紧密相关的模块和运行频率较高的模块构成，例如中断，各种管理，进程调度的，驱动程序等等。内核常驻内存，受特殊保护，为了效率高和安全性。

**<u>原语</u>**是由若干条指令组成的，用于完成特定功能的一个特殊过程。它与一般过程的区别在于：它们是**<u>原子操作</u>**，不能被打断。

### 2.3.2进程的创建

1. 申请空白PCB
2. 为新进程分配资源
3. 初始化进程控制块
   1. 初始化表示信息
   2. 初始化处理机状态信息，pc指针等现场信息
   3. 初始化处理机控制信息：状态，优先级
4. 将新进程插入就绪队列，如果进程就绪队列能够接纳新进程， 便将新进程插入就绪队列

## 2.4经典进程的同步问题

<u>**进程同步**</u>： 指对多个相关进程在执行次序上的协调。

<u>**进程同步的主要任务**</u>：  使并发执行的诸进程间能有效地共享资源和相互合作，从而使程序的执行具有可再现性。

### 2.4.1进程同步的基本概念

1. 两种形式的制约关系：

   1. *资源共享关系（间接互相制约）*<u>**互斥解决**</u>
   2. 相互合作关系（直接相互制约）<u>**同步解决**</u>

2. 临界资源

   一段时间内只允许一个进程访问的资源；临界资源要求互斥的被访问。

3. 临界区的定义

   各进程中访问临界资源的程序代码称为临界区。

4. 同步机制遵循的规则

   1. 空闲让进
   2. 忙则等待
   3. 有限等待
   4. 让权等待

## 2.5进程通信

## 2.6线程

